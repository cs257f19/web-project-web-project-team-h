<!DOCTYPE html>
<html lang="en">
<head>
  <title>Sample Landlord Result Page</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="{{ url_for('static', filename='overallPage.css') }}">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
  integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
  crossorigin=""/>
  <!-- Make sure you put this AFTER Leaflet's CSS -->
  <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
  integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
  crossorigin=""></script>
</head>
<body>
  <header>
    <div class="tag">
      <a href = "{{ url_for('homePage') }}"><h1>Airbnb in NYC</h1></a>
      <div>
        <p>All you need to know about Airbnb in NYC</p>
      </div>
    </div>
    <nav>
      <a href="{{ url_for('dataPage') }}" class="change">About the Data</a>
      <a href="#" class="change active-page">Visualize Data</a>
      <a href="{{ url_for('hostSearch') }}" class="change">For Hosts</a>
      <a href="#" class="change">Contact</a>
    </nav>
  </header>

  <section>
    <h3>
      Have a better understanding of how Airbnb is really being used and how it impacts your neighborhood.
    </h3>
  </section>

  <section>
   <div class="info">
    <div>
      <h3>Activity</h3>
      <p>Airbnb guests may leave a review after their stay, and these can be used as an indicator of airbnb
      activity (although not all guests leave a review, so the actual booking activity would be much higher).</p>
      <div class="data">
        <div id="my_dataviz" class="dataviz"></div>
        <div>
          <ul>
            <li>Average 112 nights/year</li>
            <li>1.1 reviews/listing/month</li>
            <li>Total 1,143,036 reviews</li>
            <li>$151 price/nigh</li>
          </ul>
        </div>
      </div>
    </div>
    <div>
      <h3>Room Type</h3>
      <p>Airbnb hosts can list entire homes/apartments, private or shared rooms.</p>
      <div class="data">
        <div id="my_dataviz1" class="dataviz"></div>
        <div>
          <ul>
            <li>25296 entire home/apartments</li>
            <li>22397 private roome</li>
            <li>1171 shared rooms</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="info">
    <div>
      <h3>Availability</h3>
      <p>An Airbnb host can setup a calendar for their listing so that it is only available for a few days or weeks a year.
      Somel listings are available all year round.</p><div class="data">
        <div class="data">
          <div id="my_dataviz2" class="dataviz"></div>
          <div>
            <ul>
              <li>One average 112.5 days/year</li>
            </ul>
          </div>
        </div>
      </div>
      <div>
        <h3>Listings per Host</h3>
        <p>Some Airbnb hosts have multiple listings.
        A host may list separate rooms in the same apartment, or multiple apartments or homes available in their entirity.</p>
        <div class="data">
          <div id="my_dataviz3" class="dataviz"></div>
          <div>
            <ul>
              <li>32203 single listings</li>
              <li>16661 multi listings</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="mapSection">
    <h2>Houses in the same neighborhood with the same room type</h2>
    <div id="mapid"  style=" height: 375px"></div>
  </section>

  <script>
   var mymap = L.map('mapid').setView([40.640610, -73.975242], 13);
   L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiemhhbmdzMTIzIiwiYSI6ImNrMXR6NjZobzAweW0zY3BrcnB4YmF6M3YifQ.nHmNai_UTcEJdy1VTbCXfg', {
     attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetVisual Data</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
     maxZoom: 18,
     id: 'mapbox.streets',
     accessToken: 'your.mapbox.access.token'
   }).addTo(mymap);
   var locations = [["Clean & quiet apt home by the park", 40.64749, -73.97237],
   ["Large and Cozy Private Bedroom", 40.64106, -73.97426],
   ["SUPER BIG AND COZY PRIVATE BEDROOM", 40.64302, -73.97255],
   ["Private clean pleasant spacious room.", 40.64277, -73.97296],
   ["QUIET, SPACIOUS, COMFORTABLE, & GREAT LOCATION", 40.64573, -73.98013],
   ["Vintage Chic Haven in Kensington, Brooklyn", 40.63547, -73.97417]
   ];
   var arrLen = locations.length;
   for (var i = 0; i < locations.length; i++) {
     var marker = L.marker([locations[i][1],locations[i][2]]).addTo(mymap);
     marker.bindPopup(locations[i][0]).openPopup();
   }
   var marker = L.marker([51.5, -0.09]).addTo(mymap);
 </script>
 <script>
    // create 2 data_set
    var data1 = [
    {group: "Entire home/apt", value: 25296},
    {group: "Private room", value: 22397},
    {group: "Shared room", value: 1171}
    ];

    // set the dimensions and margins of the graph
    var margin = {top: 2, right: 2, bottom: 20, left: 40},
    width = 270 - margin.left - margin.right,
    height = 120 - margin.top - margin.bottom;

    // append the svg object to the body of the page
    var svg = d3.select("#my_dataviz1")
    .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform",
      "translate(" + margin.left + "," + margin.top + ")");

    // X axis
    var x = d3.scaleBand()
    .range([ 0, width ])
    .domain(data1.map(function(d) { return d.group; }))
    .padding(0.2);
    svg.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x))

    // Add Y axis
    var y = d3.scaleLinear()
    .domain([0, 28000])
    .range([ height, 0]);
    svg.append("g")
    .attr("class", "myYaxis")
    .call(d3.axisLeft(y).ticks(2, "f"));

    // A function that create / update the plot for a given variable:
    function update(data) {

      var u = svg.selectAll("rect")
      .data(data)

      u
      .enter()
      .append("rect")
      .merge(u)
      .transition()
      .duration(1000)
      .attr("x", function(d) { return x(d.group); })
      .attr("y", function(d) { return y(d.value); })
      .attr("width", x.bandwidth())
      .attr("height", function(d) { return height - y(d.value); })
      .attr("fill", "#69b3a2")
    }

    // Initialize the plot with the first dataset
    update(data1)

  </script>
</body>
</html>
